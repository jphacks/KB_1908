<html lang="ja">

<head>
  <title>result</title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width,minimal-ui">
  <style>
    body {background-image: url("/image/bg3.png"); }
    html,body{
      overflow: hidden;
    }
  </style>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<body>
  <h1 class="fintitle">Your drink is...</h1>
  <ul id="result"></ul>
          
  
  <ul id="output"></ul>
  </body>
  <script>

  $(function(){
    $.getJSON('/result' , function(data) {
      console.log(data);
      var categories  = ["モンスター","レッドブル","BB","ジャスミン","オレンジ","ピーチ"]
      var facialExpression=[]
      $("#output").append("<li>" +data.joy + "</li>");
      $("#output").append("<li>" + data.sorrow + "</li>");
      $("#output").append("<li>" + data.anger + "</li>");
      $("#output").append("<li>" + data.surprise + "</li>");
      
      facialExpression.push(data.joy)
      facialExpression.push(data.sorrow)
      facialExpression.push(data.anger)
      facialExpression.push(data.surprise)
      //facialExpression[0] = data.joy
      //facialExpression[1] = data.sorrow
      //facialExpression[2] =  data.anger
      //facialExpression[3] = data.surprise
      //チャート描画の処理
      
      var result = setjuice(facialExpression)
      for (  var i = 0;  i < 6;  i++  ) {
      $("#result").append("<li>" +categories[i]+":"+result[i]+ "</li>");
        // 繰り返し処理
    }
  });
});
//得られた結果を画面に表示する
function setjuice(face) {
    var max = face.indexOf(Math.max(...face))
    console.log(max)
    if(max == 0){
      result = [60,30,10,0,0,0]
    }
    else if(max ==1){
      result = [20,70,10,0,0,0]
    }
    else if(max ==2){
      result = [10,10,80,0,0,0]
    }
    else if(max ==3){
      result = [0,10,10,60,20,0]
    }
    return  result;
}

</script>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
  

</html>